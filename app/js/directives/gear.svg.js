app.directive('gearSvg', ['$rootScope', function($rootScope) {
	return {
		restrict: 'AE',
		templateNamespace: 'svg',
		template: 	'<svg class="gear" version="1.0" viewBox="0 0 200 200">' +
						'<g class="lines" fill="none" fill-rule="evenodd" stroke="#FFF" stroke-width="2">' +
							'<path d="m199.48 97.977c8e-3 0.482 0.019 0.964 0.019 1.449 0 5.518-0.467 10.927-1.35 16.197-5.428 1.158-12.258 2.212-20.496 3.159-1.171 4.602-2.75 9.041-4.697 13.279 5.838 5.843 10.507 10.896 14.015 15.162-2.918 5.175-6.289 10.063-10.07 14.604-5.288-1.687-11.739-4.163-19.359-7.429-3.298 3.358-6.894 6.429-10.747 9.165 2.109 7.96 3.605 14.655 4.492 20.091-5.08 3.014-10.455 5.589-16.073 7.672-3.728-4.081-8.064-9.421-13.016-16.023-4.499 1.259-9.16 2.131-13.945 2.587-2.185 7.931-4.263 14.465-6.235 19.61-0.487 8e-3 -0.973 0.019-1.461 0.019-5.566 0-11.022-0.463-16.337-1.338-1.169-5.381-2.232-12.152-3.188-20.32-4.64-1.161-9.118-2.727-13.393-4.656-5.894 5.786-10.991 10.416-15.294 13.894-5.219-2.893-10.15-6.235-14.731-9.983 1.703-5.242 4.2-11.639 7.494-19.193-3.389-3.27-6.486-6.834-9.245-10.655-8.028 2.092-14.781 3.575-20.265 4.454-3.04-5.036-5.637-10.365-7.739-15.935 4.116-3.696 9.502-7.996 16.164-12.904-1.27-4.46-2.151-9.081-2.61-13.825-8-2.166-14.591-4.227-19.781-6.182-7e-3 -0.483-0.019-0.964-0.019-1.449 0-5.518 0.467-10.927 1.35-16.197 5.427-1.159 12.257-2.213 20.496-3.161 1.171-4.6 2.75-9.04 4.696-13.278-5.836-5.843-10.506-10.896-14.013-15.162 2.918-5.174 6.289-10.063 10.07-14.605 5.288 1.688 11.739 4.164 19.359 7.43 3.298-3.359 6.893-6.43 10.747-9.166-2.109-7.959-3.606-14.654-4.493-20.09 5.081-3.014 10.456-5.588 16.073-7.672 3.728 4.081 8.065 9.42 13.016 16.024 4.499-1.259 9.16-2.132 13.945-2.588 2.186-7.931 4.264-14.466 6.236-19.61 0.487-7e-3 0.973-0.019 1.461-0.019 5.566 0 11.022 0.463 16.337 1.338 1.169 5.38 2.231 12.152 3.188 20.32 4.641 1.161 9.118 2.726 13.394 4.656 5.894-5.787 10.991-10.416 15.294-13.893 5.219 2.893 10.15 6.235 14.731 9.984-1.703 5.242-4.199 11.639-7.494 19.193 3.389 3.269 6.485 6.833 9.245 10.654 8.028-2.091 14.781-3.575 20.265-4.454 3.04 5.037 5.637 10.366 7.738 15.936-4.116 3.695-9.502 7.996-16.163 12.904 1.27 4.46 2.15 9.082 2.61 13.825 7.998 2.165 14.59 4.225 19.779 6.181z" />' +
						'</g>' +
					'</svg>',
		replace: true,
		link: function(scope, element, attrs) {
			anime({
				targets: '.gear',
				easing: 'linear',
				rotateZ: '1turn',
				duration: 1500,
				loop: true
			});

			var an = anime({
				targets: '.gear .lines path',
				strokeDashoffset: [anime.setDashoffset, 0],
				easing: 'easeInOutSine',
				delay: function(el, i) {
					return i * 250;
				},
				duration: 2500,
				direction: 'alternate',
			});

			$rootScope.$on('window-blur', an.pause);
			$rootScope.$on('window-focus', an.play);
		}
	};
}]);
