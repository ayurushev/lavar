app.directive('kaliningradSvg', ['$rootScope', function($rootScope) {
	return {
		restrict: 'AE',
		templateNamespace: 'svg',
		template: 	'<svg id="kaliningrad" version="1.0" viewBox="0 0 3770 2030">' +
						'<g class="lines" fill="none" fill-rule="evenodd" stroke="#FFF" stroke-width="25">' +
							'<path d="m1950 2024c-25-2-169-13-320-24-346-26-480-41-804-91-143-22-341-46-440-54-175-14-361-47-381-67-14-14 51-66 99-79 65-18 82-43 122-187 5-17 41-7 71 20 12 11 29 18 37 15 22-9 223-144 279-189 27-21 53-38 57-38 5 0 21-5 36-11l28-10-29-19c-22-14-33-16-48-8-14 7-37 7-77-1-81-16-141 0-190 50l-37 38-16-35c-10-19-17-46-17-60 0-68-50-85-94-33-43 51-56 83-49 123 5 32 3 36-15 36-20 0-52-24-52-39 0-3 20-65 45-136 25-72 45-141 45-155s-9-57-20-95c-25-88-25-150 0-217l20-53 192 1c106 0 218 4 250 9 83 11 117 1 219-66 135-89 214-175 379-417 80-116 152-211 160-211 8-1 26 8 39 18l24 18-44 29c-34 23-54 49-90 116-56 106-96 156-265 328-138 141-163 179-125 199 25 14 160 19 226 8 48-8 52-7 103 32 62 47 93 55 222 55 198 2 325-86 263-180-9-14-19-60-24-102-4-42-15-140-24-217l-17-139 21-18c18-14 26-15 48-5 21 9 27 8 39-8 8-10 14-29 14-41 0-44 90-122 128-110 31 10 61 50 75 96 16 57 48 79 131 91 86 12 116 28 198 104 40 39 79 66 99 70 18 4 69 25 113 47 71 34 87 39 129 33 44-5 47-4 47 17 0 28 45 98 63 98 7 0 50-18 97-40 76-36 93-40 162-40 43 0 113 7 156 16l79 16 51-26c28-14 53-26 56-26 2 0 27 47 55 105 46 96 52 105 78 105 33 1 49 12 88 63 15 21 48 52 71 68 35 24 46 40 59 82 41 135 27 198-54 244-93 53-115 96-92 175 16 53 7 87-36 137-29 35-34 46-26 64 5 12 10 85 12 162l3 140 34 50c46 67 45 91-3 104-81 20-1501 77-1633 65z" />' +
							'<path d="m7 1703c-14-14-6-67 15-102 13-20 22-37 20-39-1-1 5-16 13-32s15-32 15-35c-2-46 11-59 43-44s34 36 7 89c-11 22-18 40-15 40 7 0-43 90-63 113-16 18-25 21-35 10z" />' +
						'</g>' +
					'</svg>',
		replace: true,
		link: function(scope, element, attrs) {
			var an = anime({
				targets: '#kaliningrad .lines path',
				strokeDashoffset: [anime.setDashoffset, 0],
				easing: 'easeInOutSine',
				delay: function(el, i) {
					return i * 250;
				},
				direction: 'alternate',
			});

			$rootScope.$on('window-blur', an.pause);
			$rootScope.$on('window-focus', an.play);
		}
	};
}]);
